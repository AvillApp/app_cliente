{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"/Users/ingjeisson/Documents/proyectos/personal/avill_cliente/app/Forms/ConfirmarForm.js\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport React, { useState, useEffect } from \"react\";\nimport View from \"react-native-web/dist/exports/View\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport AsyncStorage from \"react-native-web/dist/exports/AsyncStorage\";\nimport Dimensions from \"react-native-web/dist/exports/Dimensions\";\nimport { Content, Form, Item, Input, Label, Icon, Textarea, Picker } from \"native-base\";\nimport AppButton from \"../Lib/plug/AppButton\";\nimport Loading from \"../Lib/plug/Loading\";\nimport ErrorMessage from \"../Lib/plug/Error\";\nimport { api } from \"../Lib/utils/db\";\nimport axios from \"axios\";\nimport * as Location from 'expo-location';\nimport Constants from 'expo-constants';\nimport { MARCA } from \"../Constans/imagenes\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\n\nvar _Dimensions$get = Dimensions.get(\"window\"),\n    height = _Dimensions$get.height;\n\nexport default function ConfirmarForm(_ref) {\n  var navigation = _ref.navigation,\n      direccion = _ref.direccion,\n      emision = _ref.emision;\n\n  var _useState = useState(\"\"),\n      _useState2 = _slicedToArray(_useState, 2),\n      indicacion = _useState2[0],\n      setIndicacion = _useState2[1];\n\n  var _useState3 = useState(\"\"),\n      _useState4 = _slicedToArray(_useState3, 2),\n      telefono = _useState4[0],\n      setTelefono = _useState4[1];\n\n  var _useState5 = useState(direccion),\n      _useState6 = _slicedToArray(_useState5, 2),\n      Direccion = _useState6[0],\n      setDireccion = _useState6[1];\n\n  var _useState7 = useState(emision),\n      _useState8 = _slicedToArray(_useState7, 2),\n      Emision = _useState8[0],\n      setEmision = _useState8[1];\n\n  var _useState9 = useState(false),\n      _useState10 = _slicedToArray(_useState9, 2),\n      isVisibleLoading = _useState10[0],\n      setIsVisibleLoading = _useState10[1];\n\n  var _useState11 = useState(false),\n      _useState12 = _slicedToArray(_useState11, 2),\n      error = _useState12[0],\n      setError = _useState12[1];\n\n  var _useState13 = useState(null),\n      _useState14 = _slicedToArray(_useState13, 2),\n      location = _useState14[0],\n      setLocation = _useState14[1];\n\n  var _useState15 = useState(\"\"),\n      _useState16 = _slicedToArray(_useState15, 2),\n      longitude = _useState16[0],\n      setLongitude = _useState16[1];\n\n  var _useState17 = useState(\"\"),\n      _useState18 = _slicedToArray(_useState17, 2),\n      latitude = _useState18[0],\n      setLatitude = _useState18[1];\n\n  var _useState19 = useState(),\n      _useState20 = _slicedToArray(_useState19, 2),\n      tiposervicio = _useState20[0],\n      setTipoServicio = _useState20[1];\n\n  var _useState21 = useState([]),\n      _useState22 = _slicedToArray(_useState21, 2),\n      listTipoServ = _useState22[0],\n      setListTipoServ = _useState22[1];\n\n  var _useState23 = useState(),\n      _useState24 = _slicedToArray(_useState23, 2),\n      servicio = _useState24[0],\n      setServicio = _useState24[1];\n\n  var _useState25 = useState([]),\n      _useState26 = _slicedToArray(_useState25, 2),\n      listServicio = _useState26[0],\n      setListservicio = _useState26[1];\n\n  var buscarLocation = function buscarLocation() {\n    var _await$Location$reque, status, Locat;\n\n    return _regeneratorRuntime.async(function buscarLocation$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return _regeneratorRuntime.awrap(Location.requestPermissionsAsync());\n\n          case 2:\n            _await$Location$reque = _context.sent;\n            status = _await$Location$reque.status;\n\n            if (!(status !== 'granted')) {\n              _context.next = 6;\n              break;\n            }\n\n            return _context.abrupt(\"return\", Alert.alert('No tenemos los permisos necesarios para acceder a la localizacion'));\n\n          case 6:\n            _context.next = 8;\n            return _regeneratorRuntime.awrap(Location.getCurrentPositionAsync({}));\n\n          case 8:\n            Locat = _context.sent;\n            setLocation(Locat);\n            setLatitude(Locat.coords.latitude);\n            setLongitude(Locat.coords.longitude);\n\n          case 12:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  useEffect(function () {\n    var fetch = function fetch() {\n      var infoTipoServ;\n      return _regeneratorRuntime.async(function fetch$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return _regeneratorRuntime.awrap(axios(api + \"tipos_servicios?format=json\"));\n\n            case 2:\n              infoTipoServ = _context2.sent;\n              setListTipoServ(infoTipoServ.data);\n\n            case 4:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    };\n\n    fetch();\n    buscarLocation();\n  }, []);\n\n  var handleTipo = function handleTipo(value) {\n    var fetch;\n    return _regeneratorRuntime.async(function handleTipo$(_context4) {\n      while (1) {\n        switch (_context4.prev = _context4.next) {\n          case 0:\n            setTipoServicio(value);\n\n            fetch = function fetch() {\n              var infoTipoServ2;\n              return _regeneratorRuntime.async(function fetch$(_context3) {\n                while (1) {\n                  switch (_context3.prev = _context3.next) {\n                    case 0:\n                      _context3.next = 2;\n                      return _regeneratorRuntime.awrap(axios(api + \"servicios/buscar/\" + value + \"?format=json\"));\n\n                    case 2:\n                      infoTipoServ2 = _context3.sent;\n                      setListservicio(infoTipoServ2.data);\n\n                    case 4:\n                    case \"end\":\n                      return _context3.stop();\n                  }\n                }\n              }, null, null, null, Promise);\n            };\n\n            fetch();\n\n          case 3:\n          case \"end\":\n            return _context4.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  var ObtenerPedido = function ObtenerPedido(id) {\n    var infoUser, resUser, data, titulo, descripcion, logs_pedido;\n    return _regeneratorRuntime.async(function ObtenerPedido$(_context5) {\n      while (1) {\n        switch (_context5.prev = _context5.next) {\n          case 0:\n            _context5.next = 2;\n            return _regeneratorRuntime.awrap(fetch(api + \"pedidos/buscar/\" + id + \"?format=json\"));\n\n          case 2:\n            infoUser = _context5.sent;\n            _context5.next = 5;\n            return _regeneratorRuntime.awrap(infoUser.json());\n\n          case 5:\n            resUser = _context5.sent;\n            resUser.map(function (dt) {\n              data = dt.id;\n            });\n            _context5.next = 9;\n            return _regeneratorRuntime.awrap(AsyncStorage.setItem(\"id_pedido\", data.toString()));\n\n          case 9:\n            titulo = \"Solicitud de servicio seguro \";\n            descripcion = \"Haz solicitado un(a) \" + servicio;\n            logs_pedido = {\n              \"title\": titulo,\n              \"description\": descripcion,\n              \"pedido\": parseInt(data),\n              \"realizado_by\": parseInt(id)\n            };\n            axios.post(api + \"pedidos_acti/create/\", logs_pedido).then(function (response) {\n              navigation.navigate(\"Estado\", {\n                Direccion: Direccion\n              });\n            }).catch(function (error) {\n              console.log(error);\n            });\n\n          case 13:\n          case \"end\":\n            return _context5.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  var NuevoPedido = function NuevoPedido() {\n    var id_user, token_push, pedido;\n    return _regeneratorRuntime.async(function NuevoPedido$(_context6) {\n      while (1) {\n        switch (_context6.prev = _context6.next) {\n          case 0:\n            if (!(Direccion && indicacion)) {\n              _context6.next = 13;\n              break;\n            }\n\n            setIsVisibleLoading(true);\n            _context6.next = 4;\n            return _regeneratorRuntime.awrap(AsyncStorage.getItem(\"id_user\"));\n\n          case 4:\n            id_user = _context6.sent;\n            _context6.next = 7;\n            return _regeneratorRuntime.awrap(AsyncStorage.getItem(\"token_push\"));\n\n          case 7:\n            token_push = _context6.sent;\n            pedido = {\n              'emision': Emision,\n              'destino': Direccion,\n              'indicacion': indicacion,\n              'longitude': longitude,\n              'latitude': latitude,\n              'telealt': parseInt(telefono),\n              'estado': 3,\n              'personas': parseInt(id_user),\n              'solicitud': servicio\n            };\n            axios.post(api + \"pedidos/create/\", pedido).then(function (response) {\n              ObtenerPedido(id_user);\n            }).catch(function (error) {\n              console.log(error);\n              setError(true);\n            });\n            setIsVisibleLoading(false);\n            _context6.next = 14;\n            break;\n\n          case 13:\n            setError(true);\n\n          case 14:\n          case \"end\":\n            return _context6.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  return React.createElement(Content, {\n    ContainerStyle: {\n      justifyContent: \"center\",\n      alignItems: \"center\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 5\n    }\n  }, React.createElement(Form, {\n    style: styles.form,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 7\n    }\n  }, React.createElement(Item, {\n    floatingLabel: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 9\n    }\n  }, React.createElement(Label, {\n    style: {\n      fontSize: 15\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 11\n    }\n  }, \"(*)Desde\"), React.createElement(Input, {\n    value: Emision,\n    onChange: function onChange(e) {\n      return setEmision(e.nativeEvent.text);\n    },\n    style: {\n      fontSize: 15\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 11\n    }\n  }), React.createElement(Icon, {\n    type: \"MaterialCommunityIcons\",\n    name: \"directions\",\n    style: {\n      fontSize: 20,\n      color: \"#E9C924\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 11\n    }\n  })), React.createElement(Item, {\n    floatingLabel: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 9\n    }\n  }, React.createElement(Label, {\n    style: {\n      fontSize: 15\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 11\n    }\n  }, \"(*)Hasta\"), React.createElement(Input, {\n    value: Direccion,\n    onChange: function onChange(e) {\n      return setDireccion(e.nativeEvent.text);\n    },\n    style: {\n      fontSize: 15\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 11\n    }\n  }), React.createElement(Icon, {\n    type: \"MaterialCommunityIcons\",\n    name: \"directions\",\n    style: {\n      fontSize: 20,\n      color: \"#E9C924\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 11\n    }\n  })), React.createElement(Item, {\n    floatingLabel: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 9\n    }\n  }, React.createElement(Label, {\n    style: {\n      fontSize: 15\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 195,\n      columnNumber: 11\n    }\n  }, \"Tel\\xE9fono alternativo\"), React.createElement(Input, {\n    value: telefono,\n    onChange: function onChange(e) {\n      return setTelefono(e.nativeEvent.text);\n    },\n    style: {\n      fontSize: 15\n    },\n    placeholder: \"Dejar en blanco, utilizaremos el principal\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 196,\n      columnNumber: 11\n    }\n  }), React.createElement(Icon, {\n    type: \"MaterialCommunityIcons\",\n    name: \"cellphone\",\n    style: {\n      fontSize: 20,\n      color: \"#E9C924\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 202,\n      columnNumber: 11\n    }\n  })), React.createElement(Textarea, {\n    rowSpan: 5,\n    style: {\n      fontSize: 15\n    },\n    bordered: true,\n    placeholder: \"\\xBFC\\xF3mo  podemos llegar?\",\n    value: indicacion,\n    onChange: function onChange(e) {\n      return setIndicacion(e.nativeEvent.text);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 209,\n      columnNumber: 9\n    }\n  }), React.createElement(Label, {\n    style: {\n      marginLeft: 10,\n      fontSize: 15\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 217,\n      columnNumber: 9\n    }\n  }, \"Tipo de Servicio\"), React.createElement(Picker, {\n    mode: \"dropdown\",\n    style: {\n      marginLeft: 10,\n      width: 350\n    },\n    selectedValue: tiposervicio,\n    onValueChange: handleTipo,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 219,\n      columnNumber: 9\n    }\n  }, listTipoServ.map(function (serv) {\n    return React.createElement(Picker.Item, {\n      key: serv.id,\n      label: serv.nombre,\n      value: serv.id,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 226,\n        columnNumber: 17\n      }\n    });\n  })), React.createElement(Label, {\n    style: {\n      marginLeft: 10,\n      fontSize: 15\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 230,\n      columnNumber: 9\n    }\n  }, \"Seleccione el servicio\"), React.createElement(Picker, {\n    mode: \"dropdown\",\n    style: {\n      marginLeft: 10,\n      width: 350\n    },\n    selectedValue: servicio,\n    onValueChange: function onValueChange(itemValue, itemIndex) {\n      return setServicio(itemValue);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 233,\n      columnNumber: 9\n    }\n  }, listServicio.map(function (datos2) {\n    return React.createElement(Picker.Item, {\n      key: datos2.id,\n      label: datos2.nombre,\n      value: datos2.nombre,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 240,\n        columnNumber: 13\n      }\n    });\n  }))), React.createElement(View, {\n    style: styles.butt,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 244,\n      columnNumber: 7\n    }\n  }, React.createElement(AppButton, {\n    action: NuevoPedido,\n    title: \"Quiero el servicio\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 245,\n      columnNumber: 9\n    }\n  })), React.createElement(Loading, {\n    text: \"Buscando Rapi Segura\",\n    isVisible: isVisibleLoading,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 247,\n      columnNumber: 7\n    }\n  }), React.createElement(ErrorMessage, {\n    text: \"Problema interno, intenta de nuevo\",\n    isVisible: error,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 248,\n      columnNumber: 7\n    }\n  }));\n}\nvar styles = StyleSheet.create({\n  input: {\n    marginTop: 20\n  },\n  form: {\n    marginTop: 40\n  },\n  logo: {\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    marginLeft: 90,\n    marginTop: 100,\n    height: 200,\n    width: 200\n  },\n  butt: {\n    marginTop: 30,\n    alignItems: \"center\",\n    color: \"#FFFFFF\",\n    fontSize: 15\n  },\n  txt: {\n    marginTop: 20,\n    color: \"#FFFFFF\",\n    alignItems: \"center\",\n    fontSize: 18\n  }\n});","map":{"version":3,"sources":["/Users/ingjeisson/Documents/proyectos/personal/avill_cliente/app/Forms/ConfirmarForm.js"],"names":["React","useState","useEffect","Content","Form","Item","Input","Label","Icon","Textarea","Picker","AppButton","Loading","ErrorMessage","api","axios","Location","Constants","MARCA","Dimensions","get","height","ConfirmarForm","navigation","direccion","emision","indicacion","setIndicacion","telefono","setTelefono","Direccion","setDireccion","Emision","setEmision","isVisibleLoading","setIsVisibleLoading","error","setError","location","setLocation","longitude","setLongitude","latitude","setLatitude","tiposervicio","setTipoServicio","listTipoServ","setListTipoServ","servicio","setServicio","listServicio","setListservicio","buscarLocation","requestPermissionsAsync","status","Alert","alert","getCurrentPositionAsync","Locat","coords","fetch","infoTipoServ","data","handleTipo","value","infoTipoServ2","ObtenerPedido","id","infoUser","json","resUser","map","dt","AsyncStorage","setItem","toString","titulo","descripcion","logs_pedido","parseInt","post","then","response","navigate","catch","console","log","NuevoPedido","getItem","id_user","token_push","pedido","justifyContent","alignItems","styles","form","fontSize","e","nativeEvent","text","color","marginLeft","width","serv","nombre","itemValue","itemIndex","datos2","butt","StyleSheet","create","input","marginTop","logo","txt"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { View, StyleSheet, AsyncStorage, Dimensions } from \"react-native\";\nimport {\n  Content,\n  Form,\n  Item,\n  Input,\n  Label,\n  Icon,\n  Textarea,\n  Picker,\n} from \"native-base\";\n// import * as Location from \"expo-location\";\n// import * as Permissions from \"expo-permissions\";\nimport AppButton from \"../Lib/plug/AppButton\";\nimport Loading from \"../Lib/plug/Loading\";\nimport ErrorMessage from \"../Lib/plug/Error\";\nimport { api } from \"../Lib/utils/db\";\nimport axios from \"axios\";\nimport * as Location from 'expo-location'\nimport Constants from 'expo-constants'\nimport { MARCA } from \"../Constans/imagenes\";\nimport { Alert } from \"react-native\";\n\nconst { height } = Dimensions.get(\"window\");\n\nexport default function ConfirmarForm({ navigation, direccion, emision }) {\n  const [indicacion, setIndicacion] = useState(\"\");\n  const [telefono, setTelefono] = useState(\"\");\n  \n  const [Direccion, setDireccion] = useState(direccion);\n  const [Emision, setEmision] = useState(emision);\n\n  const [isVisibleLoading, setIsVisibleLoading] = useState(false);\n  const [error, setError] = useState(false);\n\n  // Para obtener la localización\n  const [location, setLocation] = useState(null);\n  const [longitude, setLongitude] = useState(\"\");\n  const [latitude, setLatitude] = useState(\"\");\n\n  const [tiposervicio, setTipoServicio] = useState();\n  const [listTipoServ, setListTipoServ] = useState([])\n\n  const [servicio, setServicio] = useState();\n  const [listServicio, setListservicio] = useState([]);\n\n\n  const buscarLocation = async () => {\n    const { status } = await Location.requestPermissionsAsync()\n    if (status !== 'granted'){\n      return Alert.alert('No tenemos los permisos necesarios para acceder a la localizacion')\n    }\n    const Locat = await Location.getCurrentPositionAsync({})\n    setLocation(Locat)\n\n    setLatitude(Locat.coords.latitude)\n    setLongitude(Locat.coords.longitude)\n  }\n\n  useEffect(() => {\n\n    const fetch = async () =>{\n      const infoTipoServ = await axios(\n        `${api}tipos_servicios?format=json`\n      );\n      //console.log(infoTipoServ.data)\n      setListTipoServ(infoTipoServ.data)\n    }\n    fetch()\n    buscarLocation()\n  }, [])\n\n  const handleTipo = async (value) => {\n\n    setTipoServicio(value);\n\n    const fetch = async () =>{\n      const infoTipoServ2 = await axios(\n        `${api}servicios/buscar/${value}?format=json`\n      );\n      //console.log(infoTipoServ.data)\n      setListservicio(infoTipoServ2.data)\n    }\n    fetch()\n  };\n\n\n\n\n  const ObtenerPedido = async (id) => {\n\n    const infoUser = await fetch(\n      `${api}pedidos/buscar/${id}?format=json`\n    );\n    const resUser = await infoUser.json();\n    \n    let data;\n    resUser.map(dt => {\n      data = dt.id;\n     \n    })\n\n     await AsyncStorage.setItem(\"id_pedido\", data.toString());\n\n     // Enviamos primera información\n     const titulo = \"Solicitud de servicio seguro \"\n     const descripcion = \"Haz solicitado un(a) \" + servicio\n\n     const logs_pedido = {\n      \"title\": titulo,\n      \"description\": descripcion,\n      \"pedido\": parseInt(data),\n      \"realizado_by\": parseInt(id)\n     }\n     axios.post(`${api}pedidos_acti/create/`, logs_pedido)\n        .then(response => {\n          navigation.navigate(\"Estado\", { Direccion: Direccion });\n          \n        }).catch(error=>{\n          console.log(error)\n        })\n     \n  }\n\n  const NuevoPedido = async () => {\n    if (Direccion && indicacion) {\n      setIsVisibleLoading(true);\n      //if (telefono === \"\") setTelefono(0);\n      const id_user = await AsyncStorage.getItem(\"id_user\");\n      const token_push = await AsyncStorage.getItem(\"token_push\");\n\n      const pedido = {\n        'emision': Emision,\n        'destino': Direccion,\n        'indicacion': indicacion,\n        'longitude': longitude,\n        'latitude': latitude,\n        'telealt': parseInt(telefono),\n        'estado': 3,\n        'personas': parseInt(id_user),\n        'solicitud': servicio,\n      }\n\n     //  console.log(pedido)\n      axios.post(`${api}pedidos/create/`, pedido)\n        .then(response => {\n\n          ObtenerPedido(id_user) \n          \n        }).catch(error=>{\n          console.log(error)\n           setError(true);\n        })\n\n      setIsVisibleLoading(false);\n    } else setError(true);\n  };\n\n  return (\n    <Content\n      ContainerStyle={{\n        justifyContent: \"center\",\n        alignItems: \"center\",\n      }}\n    >\n      <Form style={styles.form}>\n        <Item floatingLabel>\n          <Label style={{ fontSize: 15 }}>(*)Desde</Label>\n          <Input\n            value={Emision}\n            onChange={(e) => setEmision(e.nativeEvent.text)}\n            style={{ fontSize: 15 }}\n          />\n          <Icon\n            type=\"MaterialCommunityIcons\"\n            name=\"directions\"\n            style={{ fontSize: 20, color: \"#E9C924\" }}\n          />\n        </Item>\n        <Item floatingLabel>\n          <Label style={{ fontSize: 15 }}>(*)Hasta</Label>\n          <Input\n            value={Direccion}\n            onChange={(e) => setDireccion(e.nativeEvent.text)}\n            style={{ fontSize: 15 }}\n          />\n          <Icon\n            type=\"MaterialCommunityIcons\"\n            name=\"directions\"\n            style={{ fontSize: 20, color: \"#E9C924\" }}\n          />\n        </Item>\n        <Item floatingLabel>\n          <Label style={{ fontSize: 15 }}>Teléfono alternativo</Label>\n          <Input\n            value={telefono}\n            onChange={(e) => setTelefono(e.nativeEvent.text)}\n            style={{ fontSize: 15 }}\n            placeholder=\"Dejar en blanco, utilizaremos el principal\"\n          />\n          <Icon\n            type=\"MaterialCommunityIcons\"\n            name=\"cellphone\"\n            style={{ fontSize: 20, color: \"#E9C924\" }}\n          />\n        </Item>\n\n        <Textarea\n          rowSpan={5}\n          style={{ fontSize: 15 }}\n          bordered\n          placeholder=\"¿Cómo  podemos llegar?\"\n          value={indicacion}\n          onChange={(e) => setIndicacion(e.nativeEvent.text)}\n        />\n        <Label style={{ marginLeft: 10, fontSize: 15 }}>Tipo de Servicio</Label>\n       \n        <Picker\n              mode=\"dropdown\"\n              style={{ marginLeft: 10, width: 350 }}\n              selectedValue={tiposervicio}\n              onValueChange={handleTipo}\n            >\n              {listTipoServ.map((serv) => (\n                <Picker.Item key={serv.id} label={serv.nombre} value={serv.id} />\n              ))}\n        </Picker>\n\n        <Label style={{ marginLeft: 10, fontSize: 15 }}>\n          Seleccione el servicio\n        </Label>\n        <Picker\n          mode=\"dropdown\"\n          style={{ marginLeft: 10, width: 350 }}\n          selectedValue={servicio}\n          onValueChange={(itemValue, itemIndex) => setServicio(itemValue)}\n        >\n          {listServicio.map((datos2) => (\n            <Picker.Item key={datos2.id} label={datos2.nombre} value={datos2.nombre} />\n          ))}\n        </Picker>\n      </Form>\n      <View style={styles.butt}>\n        <AppButton action={NuevoPedido} title=\"Quiero el servicio\" />\n      </View>\n      <Loading text=\"Buscando Rapi Segura\" isVisible={isVisibleLoading} />\n      <ErrorMessage\n        text=\"Problema interno, intenta de nuevo\"\n        isVisible={error}\n      />\n    </Content>\n  );\n}\nconst styles = StyleSheet.create({\n  input: {\n    marginTop: 20,\n  },\n  form: {\n    marginTop: 40,\n  },\n  logo: {\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    marginLeft: 90,\n    marginTop: 100,\n    height: 200,\n    width: 200,\n  },\n\n  butt: {\n    marginTop: 30,\n    alignItems: \"center\",\n    color: \"#FFFFFF\",\n    fontSize: 15,\n  },\n  txt: {\n    marginTop: 20,\n    color: \"#FFFFFF\",\n    alignItems: \"center\",\n    fontSize: 18,\n  },\n});\n"]},"metadata":{},"sourceType":"module"}