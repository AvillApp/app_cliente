{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"/Users/ingjeisson/Documents/proyectos/personal/avill_cliente/app/Forms/RegisterForm.js\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport React, { useState } from \"react\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport AsyncStorage from \"react-native-web/dist/exports/AsyncStorage\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport ImageBackground from \"react-native-web/dist/exports/ImageBackground\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport { Content, Form, Item, Input, Label, Icon } from \"native-base\";\nimport AppButton from \"../Lib/plug/AppButton\";\nimport Loading from \"../Lib/plug/Loading\";\nimport ErrorMessage from \"../Lib/plug/Error\";\nimport validateNumber from \"../Lib/utils/Number\";\nimport { MARCA } from \"../Constans/imagenes\";\nimport { api } from \"../Lib/utils/db\";\nimport axios from \"axios\";\nexport default function RegisterForm(_ref) {\n  var navigation = _ref.navigation;\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      isVisibleLoading = _useState2[0],\n      setIsVisibleLoading = _useState2[1];\n\n  var _useState3 = useState(),\n      _useState4 = _slicedToArray(_useState3, 2),\n      nombre = _useState4[0],\n      setNombre = _useState4[1];\n\n  var _useState5 = useState(),\n      _useState6 = _slicedToArray(_useState5, 2),\n      apellidos = _useState6[0],\n      setApellidos = _useState6[1];\n\n  var _useState7 = useState(),\n      _useState8 = _slicedToArray(_useState7, 2),\n      telefono = _useState8[0],\n      setTelefono = _useState8[1];\n\n  var _useState9 = useState(false),\n      _useState10 = _slicedToArray(_useState9, 2),\n      error = _useState10[0],\n      setError = _useState10[1];\n\n  var _useState11 = useState(\"\"),\n      _useState12 = _slicedToArray(_useState11, 2),\n      msgError = _useState12[0],\n      setmsgError = _useState12[1];\n\n  var obtenerUser = function obtenerUser() {\n    var id_user, location;\n    return _regeneratorRuntime.async(function obtenerUser$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return _regeneratorRuntime.awrap(AsyncStorage.getItem(\"id_user\"));\n\n          case 2:\n            id_user = _context.sent;\n            _context.next = 5;\n            return _regeneratorRuntime.awrap(AsyncStorage.getItem(\"location\"));\n\n          case 5:\n            location = _context.sent;\n            console.log(\"Valor de location\", location);\n            console.log(\"Valor de user\", id_user);\n\n          case 8:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  obtenerUser();\n\n  var obtenerID = function obtenerID() {\n    var infoUser, resUser, data;\n    return _regeneratorRuntime.async(function obtenerID$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.next = 2;\n            return _regeneratorRuntime.awrap(fetch(api + \"personas/buscar/\" + telefono + \"?format=json\"));\n\n          case 2:\n            infoUser = _context2.sent;\n            _context2.next = 5;\n            return _regeneratorRuntime.awrap(infoUser.json());\n\n          case 5:\n            resUser = _context2.sent;\n            resUser.map(function (dt) {\n              data = dt.id;\n            });\n            _context2.next = 9;\n            return _regeneratorRuntime.awrap(AsyncStorage.setItem(\"id_user\", data.toString()));\n\n          case 9:\n            _context2.next = 11;\n            return _regeneratorRuntime.awrap(AsyncStorage.setItem(\"nombre\", nombre));\n\n          case 11:\n            navigation.navigate(\"Aviso\");\n\n          case 12:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  var handleRegister = function handleRegister() {\n    var persona;\n    return _regeneratorRuntime.async(function handleRegister$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            setIsVisibleLoading(true);\n\n            if (telefono && nombre && apellidos) {\n              setError(false);\n\n              if (validateNumber(telefono)) {\n                setError(false);\n                persona = {\n                  'name': nombre,\n                  'last_name': apellidos,\n                  'phone': telefono,\n                  'type_persona': 1\n                };\n                axios.post(api + \"personas/create/\", persona).then(function (response) {\n                  obtenerID();\n                }).catch(function (error) {\n                  setError(true);\n                });\n              } else {\n                setError(true);\n                setmsgError(\"Teléfono inválido\");\n              }\n            } else {\n              setmsgError(\"Complete el formulario\");\n              setError(true);\n            }\n\n            setIsVisibleLoading(false);\n\n          case 3:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  var Login = function Login() {\n    navigation.navigate(\"Login\");\n  };\n\n  return React.createElement(Content, {\n    ContainerStyle: {\n      justifyContent: \"center\",\n      alignItems: \"center\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 5\n    }\n  }, React.createElement(ImageBackground, {\n    source: MARCA.FONDO_LOGIN,\n    style: {\n      flex: 1,\n      width: null,\n      height: 900\n    },\n    resizeMode: \"cover\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 7\n    }\n  }, React.createElement(View, {\n    style: styles.centerLogo,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 9\n    }\n  }, React.createElement(Image, {\n    source: MARCA.LOGO,\n    style: styles.logo,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 11\n    }\n  })), React.createElement(ErrorMessage, {\n    text: msgError,\n    isVisible: error,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 9\n    }\n  }), React.createElement(Form, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 9\n    }\n  }, React.createElement(Item, {\n    floatingLabel: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 11\n    }\n  }, React.createElement(Label, {\n    style: {\n      color: \"#FFFFFF\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 13\n    }\n  }, \"Nombre\"), React.createElement(Input, {\n    onChange: function onChange(e) {\n      return setNombre(e.nativeEvent.text);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 13\n    }\n  }), React.createElement(Icon, {\n    type: \"MaterialCommunityIcons\",\n    name: \"account\",\n    style: {\n      fontSize: 20,\n      color: \"#FFFFFF\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 13\n    }\n  })), React.createElement(Item, {\n    floatingLabel: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 11\n    }\n  }, React.createElement(Label, {\n    style: {\n      color: \"#FFFFFF\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 13\n    }\n  }, \"Apellidos\"), React.createElement(Input, {\n    onChange: function onChange(e) {\n      return setApellidos(e.nativeEvent.text);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 13\n    }\n  }), React.createElement(Icon, {\n    type: \"MaterialCommunityIcons\",\n    name: \"account\",\n    style: {\n      fontSize: 20,\n      color: \"#FFFFFF\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 13\n    }\n  })), React.createElement(Item, {\n    floatingLabel: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 11\n    }\n  }, React.createElement(Label, {\n    style: {\n      color: \"#FFFFFF\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 13\n    }\n  }, \"Tel\\xE9fono celular\"), React.createElement(Input, {\n    onChange: function onChange(e) {\n      return setTelefono(e.nativeEvent.text);\n    },\n    style: {\n      fontSize: 20,\n      color: \"#FFFFFF\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 13\n    }\n  }), React.createElement(Icon, {\n    type: \"MaterialCommunityIcons\",\n    name: \"cellphone\",\n    style: {\n      fontSize: 20,\n      color: \"#FFFFFF\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 13\n    }\n  })), React.createElement(View, {\n    style: styles.butt,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 11\n    }\n  }, React.createElement(AppButton, {\n    action: handleRegister,\n    title: \"Registrarse\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 13\n    }\n  })), React.createElement(View, {\n    style: styles.txt,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 11\n    }\n  }, React.createElement(Text, {\n    style: styles.txt,\n    onPress: Login,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 13\n    }\n  }, \"Si tengo una cuenta, haz clic aqu\\xED\"))), React.createElement(Loading, {\n    text: \"Creando cuenta\",\n    isVisible: isVisibleLoading,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 9\n    }\n  })));\n}\nvar styles = StyleSheet.create({\n  inputForm: {\n    width: \"100%\",\n    marginTop: 20\n  },\n  logo: {\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    marginLeft: 90,\n    marginTop: 100,\n    height: 200,\n    width: 200\n  },\n  butt: {\n    marginTop: 20,\n    alignItems: \"center\"\n  },\n  icono: {\n    width: 24,\n    height: 24\n  },\n  iconRight: {\n    color: \"#C1C1C1\"\n  },\n  btnContainerStyle: {\n    marginTop: 20,\n    width: \"95%\"\n  },\n  btnRegister: {\n    backgroundColor: \"#00a680\"\n  },\n  info4: {\n    fontSize: 14,\n    marginTop: 10,\n    marginBottom: 20,\n    textAlign: \"center\"\n  },\n  txt: {\n    marginTop: 20,\n    color: \"#FFFFFF\",\n    alignItems: \"center\",\n    fontSize: 18\n  }\n});","map":{"version":3,"sources":["/Users/ingjeisson/Documents/proyectos/personal/avill_cliente/app/Forms/RegisterForm.js"],"names":["React","useState","Content","Form","Item","Input","Label","Icon","AppButton","Loading","ErrorMessage","validateNumber","MARCA","api","axios","RegisterForm","navigation","isVisibleLoading","setIsVisibleLoading","nombre","setNombre","apellidos","setApellidos","telefono","setTelefono","error","setError","msgError","setmsgError","obtenerUser","AsyncStorage","getItem","id_user","location","console","log","obtenerID","fetch","infoUser","json","resUser","map","dt","data","id","setItem","toString","navigate","handleRegister","persona","post","then","response","catch","Login","justifyContent","alignItems","FONDO_LOGIN","flex","width","height","styles","centerLogo","LOGO","logo","color","e","nativeEvent","text","fontSize","butt","txt","StyleSheet","create","inputForm","marginTop","marginLeft","icono","iconRight","btnContainerStyle","btnRegister","backgroundColor","info4","marginBottom","textAlign"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport {\n  StyleSheet,\n  AsyncStorage,\n  View,\n  Image,\n  ImageBackground,\n  Text,\n} from \"react-native\";\nimport { Content, Form, Item, Input, Label, Icon } from \"native-base\";\nimport AppButton from \"../Lib/plug/AppButton\";\nimport Loading from \"../Lib/plug/Loading\";\nimport ErrorMessage from \"../Lib/plug/Error\";\nimport validateNumber from \"../Lib/utils/Number\";\nimport { MARCA } from \"../Constans/imagenes\";\nimport { api } from \"../Lib/utils/db\";\nimport axios from \"axios\";\n\nexport default function RegisterForm({ navigation }) {\n  const [isVisibleLoading, setIsVisibleLoading] = useState(false);\n  const [nombre, setNombre] = useState();\n  const [apellidos, setApellidos] = useState();\n  const [telefono, setTelefono] = useState();\n  const [error, setError] = useState(false);\n  const [msgError, setmsgError] = useState(\"\");\n\n  const obtenerUser = async () => {\n    const id_user = await AsyncStorage.getItem(\"id_user\");\n    const location = await AsyncStorage.getItem(\"location\");\n\n    console.log(\"Valor de location\", location)\n    console.log(\"Valor de user\", id_user)\n    // if (id_user){\n    //   if(location)\n    //     navigation.navigate(\"app\");\n    //   else\n    //     navigation.navigate(\"Aviso\"); \n    // }  \n  };\n  obtenerUser();\n\n\n  const obtenerID = async () => {\n\n    const infoUser = await fetch(\n      `${api}personas/buscar/${telefono}?format=json`\n    );\n    const resUser = await infoUser.json();\n    \n\n    let data;\n    resUser.map(dt => {\n      data = dt.id;\n     \n    })\n\n    //console.log(\"información del ID: \", data)\n    await AsyncStorage.setItem(\"id_user\", data.toString());\n    await AsyncStorage.setItem(\"nombre\", nombre);\n    navigation.navigate(\"Aviso\");\n    //navigation.navigate(\"app\");\n\n  }\n\n  const handleRegister = async () => {\n    setIsVisibleLoading(true);\n    if (telefono && nombre && apellidos) {\n      setError(false);\n      if (validateNumber(telefono)) {\n        setError(false);\n\n        const persona = {\n          'name': nombre,\n          'last_name': apellidos,\n          'phone': telefono,\n          'type_persona': 1,\n        }\n        \n        axios.post(`${api}personas/create/`, persona)\n        .then(response => {\n\n            obtenerID() \n          \n        }).catch(error=>{\n           setError(true);\n        })\n        \n      } else {\n        setError(true);\n        setmsgError(\"Teléfono inválido\");\n      }\n    } else {\n      setmsgError(\"Complete el formulario\");\n      setError(true);\n    }\n    setIsVisibleLoading(false);\n  };\n  const Login = () => {\n    navigation.navigate(\"Login\");\n  };\n  return (\n    <Content\n      ContainerStyle={{\n        justifyContent: \"center\",\n        alignItems: \"center\",\n      }}\n    >\n      <ImageBackground\n        source={MARCA.FONDO_LOGIN}\n        style={{ flex: 1, width: null, height: 900 }}\n        resizeMode=\"cover\"\n      >\n        <View style={styles.centerLogo}>\n          <Image source={MARCA.LOGO} style={styles.logo} />\n        </View>\n        <ErrorMessage text={msgError} isVisible={error} />\n        <Form>\n          <Item floatingLabel>\n            <Label style={{ color: \"#FFFFFF\" }}>Nombre</Label>\n            <Input onChange={(e) => setNombre(e.nativeEvent.text)} />\n            <Icon\n              type=\"MaterialCommunityIcons\"\n              name=\"account\"\n              style={{ fontSize: 20, color: \"#FFFFFF\" }}\n            />\n          </Item>\n          <Item floatingLabel>\n            <Label style={{ color: \"#FFFFFF\" }}>Apellidos</Label>\n            <Input onChange={(e) => setApellidos(e.nativeEvent.text)} />\n            <Icon\n              type=\"MaterialCommunityIcons\"\n              name=\"account\"\n              style={{ fontSize: 20, color: \"#FFFFFF\" }}\n            />\n          </Item>\n          <Item floatingLabel>\n            <Label style={{ color: \"#FFFFFF\" }}>Teléfono celular</Label>\n            <Input\n              onChange={(e) => setTelefono(e.nativeEvent.text)}\n              style={{ fontSize: 20, color: \"#FFFFFF\" }}\n            />\n            <Icon\n              type=\"MaterialCommunityIcons\"\n              name=\"cellphone\"\n              style={{ fontSize: 20, color: \"#FFFFFF\" }}\n            />\n          </Item>\n          <View style={styles.butt}>\n            <AppButton action={handleRegister} title=\"Registrarse\" />\n          </View>\n          <View style={styles.txt}>\n            <Text style={styles.txt} onPress={Login}>\n              Si tengo una cuenta, haz clic aquí\n            </Text>\n          </View>\n        </Form>\n        <Loading text=\"Creando cuenta\" isVisible={isVisibleLoading} />\n      </ImageBackground>\n    </Content>\n  );\n}\n\nconst styles = StyleSheet.create({\n  inputForm: {\n    width: \"100%\",\n    marginTop: 20,\n  },\n  logo: {\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    marginLeft: 90,\n    marginTop: 100,\n    height: 200,\n    width: 200,\n  },\n  butt: {\n    marginTop: 20,\n    alignItems: \"center\",\n  },\n  icono: {\n    width: 24,\n    height: 24,\n  },\n  iconRight: {\n    color: \"#C1C1C1\",\n  },\n  btnContainerStyle: {\n    marginTop: 20,\n    width: \"95%\",\n  },\n  btnRegister: {\n    backgroundColor: \"#00a680\",\n  },\n  info4: {\n    fontSize: 14,\n    marginTop: 10,\n    marginBottom: 20,\n    textAlign: \"center\",\n  },\n  txt: {\n    marginTop: 20,\n    color: \"#FFFFFF\",\n    alignItems: \"center\",\n    fontSize: 18,\n  },\n});\n"]},"metadata":{},"sourceType":"module"}